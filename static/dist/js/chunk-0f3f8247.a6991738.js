(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f3f8247"],{"2bfd":function(t,e,a){},"39a2":function(t,e,a){},"3a0b":function(t,e,a){},"50fc":function(t,e,a){"use strict";var n=a("39a2"),s=a.n(n);s.a},afdd:function(t,e,a){"use strict";var n=a("8336");e["a"]=n["a"]},baaf:function(t,e,a){"use strict";var n=a("c6a6");e["a"]=n["a"]},c6a6:function(t,e,a){"use strict";a("2bfd");var n=a("b974"),s=a("8654"),i=a("d9f7"),o=a("80d2");const r={...n["b"],offsetY:!0,offsetOverflow:!0,transition:!1};e["a"]=n["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,a)=>a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:n["a"].options.props.menuProps.type,default:()=>r},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...n["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(t=>this.getValue(t))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(t=>!this.hasItem(t)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(t=>this.filter(t,String(this.internalSearch),String(this.getText(t))))},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=n["a"].options.computed.$_menuProps.call(this);return t.contentClass=`v-autocomplete__content ${t.contentClass||""}`.trim(),{...r,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue)))},listData(){const t=n["a"].options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},methods:{onFilteredItemsChanged(t,e){t!==e&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===o["s"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===o["s"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==o["s"].backspace&&t!==o["s"].delete||this.deleteCurrentItem())},deleteCurrentItem(){if(this.readonly)return;const t=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==t)return void(this.selectedIndex=t);const e=this.selectedItems[this.selectedIndex];if(this.getDisabled(e))return;const a=this.selectedIndex===t?this.selectedIndex-1:this.selectedItems[this.selectedIndex+1]?this.selectedIndex:-1;-1===a?this.setValue(this.multiple?[]:void 0):this.selectItem(e),this.selectedIndex=a},clearableCallback(){this.internalSearch=void 0,n["a"].options.methods.clearableCallback.call(this)},genInput(){const t=s["a"].options.methods.genInput.call(this);return t.data=Object(i["a"])(t.data,{attrs:{"aria-activedescendant":Object(o["l"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(o["l"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=n["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?n["a"].options.methods.genSelections.call(this):[]},onClick(t){this.isDisabled||(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,a=e.value;e.value&&this.activateMenu(),this.internalSearch=a,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;n["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){n["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){n["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){n["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?this.internalSearch||null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){if(-1===this.selectedIndex)return;const e=this.selectedItems[this.selectedIndex],a=this.getText(e);t.clipboardData.setData("text/plain",a),t.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",a),t.preventDefault()}}})},c947:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.sourceObject.id?a("v-card",{staticClass:"calligraphy",attrs:{dense:""}},[a("v-card-title",{staticClass:"py-1 desertsand--text"},[t._v(" Translations: "),t.userHasTranslation?t._e():a("v-btn",{staticClass:"primary desertsand--text ma-1",attrs:{outlined:""},on:{click:function(e){return t.loadTranslation(0)}}},[t._v("Add New"),a("v-icon",{attrs:{right:""}},[t._v("mdi-plus-circle")])],1),t.userHasTranslation&&!t.userTranslationLoaded?a("v-btn",{staticClass:"desertsand--text ma-1",attrs:{outlined:""},on:{click:function(e){return t.loadTranslation(t.sourceObject.user_translation)}}},[t._v("View Yours"),a("v-icon",{attrs:{right:""}},[t._v("mdi-pencil")])],1):t._e(),a("v-btn",{staticClass:"desertsand--text ma-1",attrs:{loading:t.fetchingSource,disabled:t.numberOfTranslations<1,outlined:""},on:{click:function(e){t.showTranslationList=!0}}},[t._v(" View Published "),a("v-badge",{attrs:{content:t.numberOfTranslations,color:"calligraphy darken-1"}},[a("v-icon",[t._v("mdi-script-text-outline")])],1)],1),a("v-dialog",{attrs:{width:"395"},model:{value:t.showTranslationList,callback:function(e){t.showTranslationList=e},expression:"showTranslationList"}},[void 0,a("TranslationListModal",{attrs:{"translation-list":t.sourceObject.translations},on:{closeDialog:function(e){t.showTranslationList=!1},loadTranslation:t.loadTranslation}})],2)],1),t.translationLoaded?a("v-card-text",{staticClass:"desertsand calligraphy--text px-2 ma-0"},[a("v-row",{attrs:{dense:"",wrap:"","no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[t._v(" By "),a("span",{staticClass:"primary--text font-weight-black mx-1"},[t._v(" "+t._s(t.translation.curator.username)+" ")]),t._v(" on "+t._s(t.translation.curationdate)+" "),a("v-chip",{staticClass:"mx-2",attrs:{outlined:"",small:"",color:"languages"}},[t._v(t._s(t.translation.targetlanguage))]),a("ElementVoter",{attrs:{"up-vote-count":t.translation.upvote_count,"down-vote-count":t.translation.downvote_count,"user-vote":t.translation.user_vote,elementid:t.translation.id,"element-type":"Translation","text-typography":"body-1"},on:{updateVote:t.updateVote}})],1),t.translation.published?t._e():a("v-col",{staticClass:"overline",attrs:{cols:"12"}},[t._v(" ...this translation is currently in draft and not visible to others... ")]),t.translation.forkparent?a("v-col",{staticClass:"overline",attrs:{cols:"12"}},[t._v(" ...this translation was forked from "),a("a",{staticClass:"primary--text font-weight-black",on:{click:function(e){return e.preventDefault(),t.loadTranslation(t.translation.forkparent)}}},[t._v("Translation ID: "+t._s(t.translation.forkparent))]),t._v("... ")]):t._e(),a("v-col",{attrs:{cols:"12"}},[t.isCurator?t._e():a("v-toolbar",{staticClass:"calligraphy pa-0",attrs:{dense:"",flat:""}},[a("v-btn",{attrs:{small:"",color:"elements desertsand--text"},on:{click:function(e){t.userHasTranslation?t.forkOverwriteDialog=!0:t.forkTranslation}}},[t._v(" Fork "),a("v-badge",{attrs:{content:t.translation.forks_count,color:"elements darken-2"}},[a("v-icon",[t._v(" mdi-source-fork ")])],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:t.forkOverwriteDialog,callback:function(e){t.forkOverwriteDialog=e},expression:"forkOverwriteDialog"}},[a("v-card",{staticClass:"calligraphy desertsand--text"},[a("v-card-title",{staticClass:"headline"},[t._v("Delete Your Translation?")]),a("v-card-text",{staticClass:"desertsand calligraphy--text pt-1"},[t._v(" You've already started a translation for this source item. In order to fork a new translation, you must first delete your old. Confirm delete and proceed with fork? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{small:"",color:"garbage desertsand--text"},on:{click:function(e){t.forkOverwriteDialog=!1}}},[t._v("Cancel "),a("v-icon",{attrs:{right:""}},[t._v("mdi-cancel")])],1),a("v-btn",{attrs:{small:"",color:"error desertsand--text"},on:{click:t.forkTranslation}},[t._v("Proceed "),a("v-icon",{attrs:{right:""}},[t._v("mdi-source-fork")])],1)],1)],1)],1),a("v-btn",{staticClass:"mr-1",attrs:{disabled:"",text:""}},[t._v(" QC ")])],1),t.isCurator?a("v-toolbar",{staticClass:"calligraphy pa-0",attrs:{dense:"",flat:""}},[t.editing?a("v-btn",{staticClass:"primary desertsand--text mr-1",attrs:{small:"",loading:t.submittingSave,disabled:!t.unsavedChanges},on:{click:t.submitSave}},[t._v(" Save "),a("v-icon",{attrs:{right:""}},[t._v("mdi-content-save")])],1):t._e(),t.editing?a("v-btn",{staticClass:"garbage desertsand--text mr-1",attrs:{small:""},on:{click:t.checkEdits}},[t._v(" Close Edit "),a("v-icon",{attrs:{right:""}},[t._v("mdi-close")])],1):t._e(),t.editing?t._e():a("v-btn",{staticClass:"primary mr-1",attrs:{small:""},on:{click:t.openEdit}},[t._v(" Edit "),a("v-icon",{attrs:{right:""}},[t._v(" mdi-pencil ")])],1),a("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:t.unsavedChangesDialog,callback:function(e){t.unsavedChangesDialog=e},expression:"unsavedChangesDialog"}},[a("v-card",{staticClass:"calligraphy desertsand--text"},[a("v-card-title",{staticClass:"headline"},[t._v("Unsaved Changes")]),a("v-card-text",{staticClass:"desertsand calligraphy--text pt-1"},[t._v(" You have made changes to your translation. Would you like to save them, or throw them away? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{small:"",color:"primary desertsand--text"},on:{click:t.saveEditsThenClose}},[t._v("Save"),a("v-icon",{attrs:{right:""}},[t._v("mdi-content-save")])],1),a("v-btn",{attrs:{small:"",color:"garbage desertsand--text"},on:{click:t.trashEditsThenClose}},[t._v("Trash"),a("v-icon",{attrs:{right:""}},[t._v("mdi-delete")])],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:t.confirmDeleteDialog,callback:function(e){t.confirmDeleteDialog=e},expression:"confirmDeleteDialog"}},[a("v-card",{staticClass:"calligraphy desertsand--text"},[a("v-card-title",{staticClass:"headline"},[t._v("Confirm Delete?")]),a("v-card-text",{staticClass:"desertsand calligraphy--text pt-1"},[t._v(" You've worked so hard; are you sure that you want to flush all of that work down the toilet and deprive the world of your masterpiece? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{small:"",color:"primary desertsand--text"},on:{click:function(e){t.confirmDeleteDialog=!1}}},[t._v("Cancel"),a("v-icon",{attrs:{right:""}},[t._v("mdi-content-save")])],1),a("v-btn",{attrs:{small:"",color:"garbage desertsand--text",loading:t.submittingDelete},on:{click:t.deleteTranslation}},[t._v("Delete"),a("v-icon",{attrs:{right:""}},[t._v("mdi-delete")])],1)],1)],1)],1),t.translation.published||t.editing?t._e():a("v-btn",{staticClass:"elements desertsand--text mr-1",attrs:{small:""},on:{click:t.togglePublish}},[t._v(" Publish"),a("v-icon",{attrs:{right:""}},[t._v("mdi-eye")])],1),t.translation.published&&!t.editing?a("v-btn",{staticClass:"elements desertsand--text mr-1",attrs:{small:""},on:{click:t.togglePublish}},[t._v(" Return to Draft"),a("v-icon",{attrs:{right:""}},[t._v("mdi-eye-off")])],1):t._e(),t.editing?t._e():a("v-btn",{staticClass:"garbage desertsand--text mr-1",attrs:{small:""},on:{click:function(e){t.confirmDeleteDialog=!0}}},[t._v(" Delete "),a("v-icon",{attrs:{right:""}},[t._v(" mdi-delete ")])],1)],1):t._e()],1),a("v-col",{attrs:{cols:"12"}},[t.isCurator&&t.editing?a("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.commands,s=e.isActive;return[a("div",{staticClass:"desertsand--text"},[a("v-toolbar",{staticClass:"calligraphy",attrs:{dense:"",flat:""}},[a("v-btn",{class:{"is-active":s.bold()},attrs:{small:"",icon:"",color:"sandstone"},on:{click:n.bold}},[a("v-icon",[t._v(" mdi-format-bold ")])],1),a("v-btn",{class:{"is-active":s.italic()},attrs:{icon:"",small:"",color:"sandstone"},on:{click:n.italic}},[a("v-icon",[t._v(" mdi-format-italic ")])],1),a("v-divider",{staticClass:"mx-1",attrs:{inset:"",vertical:""}}),a("v-btn",{class:{"is-active":s.paragraph()},attrs:{icon:"",small:"",color:"sandstone"},on:{click:n.paragraph}},[a("v-icon",[t._v(" mdi-format-paragraph ")])],1),a("v-btn",{class:{"is-active":s.heading({level:1})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.heading({level:1})}}},[a("v-icon",[t._v(" mdi-format-header-1 ")])],1),a("v-btn",{class:{"is-active":s.heading({level:2})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.heading({level:2})}}},[a("v-icon",[t._v(" mdi-format-header-2 ")])],1),a("v-btn",{class:{"is-active":s.heading({level:3})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.heading({level:3})}}},[a("v-icon",[t._v(" mdi-format-header-3 ")])],1),a("v-divider",{staticClass:"mx-1",attrs:{inset:"",vertical:""}}),a("v-btn",{class:{"is-active":s.alignment({orientation:"left"})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.alignment({orientation:"left"})}}},[a("v-icon",[t._v(" mdi-format-align-left ")])],1),a("v-btn",{class:{"is-active":s.alignment({orientation:"center"})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.alignment({orientation:"center"})}}},[a("v-icon",[t._v(" mdi-format-align-center ")])],1),a("v-btn",{class:{"is-active":s.alignment({orientation:"right"})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.alignment({orientation:"right"})}}},[a("v-icon",[t._v(" mdi-format-align-right ")])],1),a("v-btn",{class:{"is-active":s.text_direction({direction:"ltr"})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.text_direction({direction:"ltr"})}}},[a("v-icon",[t._v(" mdi-format-textdirection-l-to-r ")])],1),a("v-btn",{class:{"is-active":s.text_direction({direction:"rtl"})},attrs:{icon:"",small:"",color:"sandstone"},on:{click:function(t){return n.text_direction({direction:"rtl"})}}},[a("v-icon",[t._v(" mdi-format-textdirection-r-to-l ")])],1),a("v-divider",{staticClass:"mx-1",attrs:{inset:"",vertical:""}}),a("v-btn",{class:{"is-active":s.highlighter()},attrs:{icon:"",small:"",color:"primary"},on:{click:n.highlighter}},[a("v-icon",[t._v(" mdi-marker ")])],1),a("v-divider",{staticClass:"mx-1",attrs:{inset:"",vertical:""}}),a("v-overflow-btn",{staticClass:"pa-0",attrs:{items:t.allLanguages,loading:t.loadingLanguages,editable:"",dense:"",color:"sandstone calligraphy--text",label:"Select Language","hide-details":"",overflow:"","item-color":"primary"},on:{change:function(e){t.unsavedChanges=!0}},model:{value:t.translation.targetlanguage,callback:function(e){t.$set(t.translation,"targetlanguage",e)},expression:"translation.targetlanguage"}}),a("v-spacer")],1)],1)]}}],null,!1,374960701)}):t._e(),a("editor-content",{staticClass:"editor-box",style:t.editorFontClass,attrs:{editor:t.editor}}),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.changeEditorFontSize("down")}}},[a("v-icon",[t._v("mdi-magnify-minus")])],1),t._v(" Text Size "),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.changeEditorFontSize("up")}}},[a("v-icon",[t._v("mdi-magnify-plus")])],1)],1)],1)],1):t._e()],1):t._e(),a("v-overlay",{attrs:{value:t.loadingTranslation,absolute:"",color:"calligraphy",opacity:"0.75"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),a("v-snackbar",{attrs:{top:"",color:t.snackColor,timeout:t.snackTimeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackText)+" "),a("v-btn",{staticClass:"desertsand--text",attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},[t._v(" Close ")])],1)],1)},s=[],i=(a("99af"),a("d3b7"),a("96cf"),a("1da1")),o=a("5ce5"),r=a("fbee"),l=a("cd42"),c=a("f23d"),d=a("6f14"),h=a("e880"),u=a("b878"),v={name:"TranslationEditor",components:{EditorContent:l["b"],EditorMenuBar:l["c"],ElementVoter:r["a"],TranslationListModal:function(){return a.e("chunk-2d229629").then(a.bind(null,"dce9"))}},props:{sourceType:{type:String,required:!0},passedSource:{type:Object,required:!0}},data:function(){var t=this;return{sourceObject:{},translation:{targetlanguage:""},fetchingSource:!1,showTranslationList:!1,showTranslation:!1,editorFontSize:1,languageDialog:!1,allLanguages:[],loadingLanguages:!1,translationLoaded:!1,loadedTranslation:0,loadingTranslation:!1,snackbar:!1,snackColor:"primary desertsand--text",snackTimeout:2e3,snackText:"",submittingFork:!1,submittingSave:!1,submittingDelete:!1,forkOverwriteDialog:!1,editing:!1,unsavedChangesDialog:!1,unsavedChanges:!1,currentContent:"",confirmDeleteDialog:!1,editor:new l["a"]({editable:!1,extensions:[new c["a"],new c["c"],new c["d"]({levels:[1,2,3]}),new c["b"],new d["a"],new h["a"],new c["f"],new c["g"],new c["h"],new c["i"],new c["e"],new u["a"]],content:"\n          Loading\n         ",onUpdate:function(){t.unsavedChanges=!0}})}},watch:{},computed:{isCurator:function(){return!!this.translation.curator&&this.translation.curator.username===window.localStorage.getItem("username")},editorFontClass:function(){return"font-size:".concat(this.editorFontSize,"em")},numberOfTranslations:function(){return this.sourceObject.translations?this.sourceObject.translations.length:0},userHasTranslation:function(){return this.sourceObject.user_translation>0},userTranslationLoaded:function(){return this.translation.id===this.sourceObject.user_translation}},methods:{getLanguages:function(){var t=this;this.loadingLanguages=!0;var e="/api/categories/languages/";try{Object(o["a"])(e).then((function(e){null!=e?(t.allLanguages=e,t.error=!1):(console.log("Something bad happened..."),t.error=!0),t.loadingLanguages=!1}))}catch(a){console.log(a)}},changeEditorFontSize:function(t){"up"===t?this.editorFontSize<3.5&&(this.editorFontSize+=.15):this.editorFontSize>.5&&(this.editorFontSize-=.15)},updateVote:function(t){this.translation.user_vote=t.newuservote,this.translation.downvote_count=t.newdowncount,this.translation.upvote_count=t.newupcount},checkEdits:function(){this.unsavedChanges?this.unsavedChangesDialog=!0:this.closeEdit()},saveEditsThenClose:function(){this.unsavedChangesDialog=!1,this.submitSave()?this.closeEdit():console.log("error saving")},trashEditsThenClose:function(){this.unsavedChangesDialog=!1,this.editor.setContent(this.currentContent),this.closeEdit()},closeEdit:function(){this.editing=!1,this.editor.setOptions({editable:this.editing})},openEdit:function(){this.editing=!0,this.editor.setOptions({editable:this.editing})},loadImage:function(t){t({src:"https://66.media.tumblr.com/dcd3d24b79d78a3ee0f9192246e727f1/tumblr_o00xgqMhPM1qak053o1_400.gif"})},togglePublish:function(){var t=this;this.publishing=!0;var e="/api/elements/translation/publish/";try{Object(o["a"])(e,"POST",{pk:this.translation.id}).then((function(e){null!=e&&1==e.success&&(t.translation.published=e.published,t.refetchSourceElement()),t.publishing=!1}))}catch(a){console.log(a)}},loadTranslation:function(t){var e=this;if(this.loadingTranslation=!0,0===t){var a="/api/elements/translationz/",n={sourceid:this.sourceObject.id,sourcetype:this.sourceType,content:"new translation",targetlanguage:"English"};Object(o["a"])(a,"POST",n).then((function(t){t?(e.translation=t,e.sourceObject.user_translation=e.translation.id,e.translationLoaded=!0,e.feedSnack("success darken-1 desertsand--text body-1","New translation created!",2750),e.currentContent=e.translation.content,e.editor.setContent(e.currentContent)):(console.log("Something went wrong"),e.translationLoaded=!1),e.loadingTranslation=!1}))}else{var s="/api/elements/translationz/".concat(t,"/");try{Object(o["a"])(s).then((function(t){t.id?(e.translation=t,e.translationLoaded=!0,e.currentContent=e.translation.content,e.editor.setContent(e.currentContent)):(e.feedSnack("elements darken-1 desertsand--text body-1","Error loading translation!",2750),e.translation={},e.translationLoaded=!1),e.loadingTranslation=!1}))}catch(i){console.log(i),this.loadTranslation=!1}}},submitSave:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.submittingSave=!0,a=t.currentContent=t.editor.getJSON(),n="/api/elements/translationz/".concat(t.translation.id,"/"),s={content:a,targetlanguage:t.translation.targetlanguage},Object(o["a"])(n,"PATCH",s).then((function(e){return e?(t.unsavedChanges=!1,t.submittingSave=!1,t.feedSnack("success darken-1 desertsand--text body-1","Edits have been saved!",2250),!0):(t.submittingSave=!1,!1)}));case 5:case"end":return e.stop()}}),e)})))()},deleteTranslation:function(){var t=this;this.submittingDelete=!0;var e="/api/elements/translationz/".concat(this.translation.id,"/");try{Object(o["a"])(e,"DELETE").then((function(){t.feedSnack("garbage darken-1 desertsand--text body-1","Translation deleted! :-(",2750),t.refetchSourceElement(),t.submittingDelete=!1,t.confirmDeleteDialog=!1,t.translationLoaded=!1}))}catch(a){console.log(a)}},forkTranslation:function(){var t=this;this.submittingFork=!0;var e=this.editor.getJSON(),a="/api/elements/translationz/",n=new Date,s={sourcetype:this.sourceType,sourceid:this.sourceObject.id,forkparent:this.translation.id,content:e,notes:"This translation was forked from ".concat(this.translation.curator,"'s translation on ").concat(n.toDateString())};Object(o["a"])(a,"POST",s).then((function(e){e?(t.loadTranslation(e.id),t.refetchSourceElement()):console.log("There was a problem"),t.submittingFork=!1}))},submitLanguage:function(){console.log("submitting")},refetchSourceElement:function(){var t=this;this.fetchingSource=!0;var e="";"graphic"===this.sourceType?e="/api/elements/graphicz/".concat(this.sourceObject.id,"/"):"transcript"===this.sourceType&&(e="/api/elements/transcriptz/".concat(this.sourceObject.id,"/")),Object(o["a"])(e).then((function(e){e?t.sourceObject=e:console.log("Problem"),t.fetchingSource=!1}))},feedSnack:function(t,e,a){this.snackColor=t,this.snackText=e,this.snackTimeout=a,this.snackbar=!0}},beforeDestroy:function(){this.editor.destroy()},mounted:function(){this.sourceObject=this.passedSource},created:function(){this.getLanguages()}},g=v,m=(a("50fc"),a("2877")),p=a("6544"),f=a.n(p),b=a("4ca6"),k=a("8336"),x=a("b0af"),S=a("99d9"),C=a("cc20"),y=a("62ad"),_=a("169a"),w=a("ce7e"),I=a("132d"),T=(a("3a0b"),a("b974")),D=a("baaf"),O=a("8654"),V=a("afdd"),L=a("d9bd"),E=D["a"].extend({name:"v-overflow-btn",props:{editable:Boolean,segmented:Boolean},computed:{classes(){return{...D["a"].options.computed.classes.call(this),"v-overflow-btn":!0,"v-overflow-btn--segmented":this.segmented,"v-overflow-btn--editable":this.editable}},isAnyValueAllowed(){return this.editable||D["a"].options.computed.isAnyValueAllowed.call(this)},isSingle(){return!0},computedItems(){return this.segmented?this.allItems:this.filteredItems}},methods:{genSelections(){return this.editable?D["a"].options.methods.genSelections.call(this):T["a"].options.methods.genSelections.call(this)},genCommaSelection(t,e,a){return this.segmented?this.genSegmentedBtn(t):T["a"].options.methods.genCommaSelection.call(this,t,e,a)},genInput(){const t=O["a"].options.methods.genInput.call(this);return t.data=t.data||{},t.data.domProps.value=this.editable?this.internalSearch:"",t.data.attrs.readonly=!this.isAnyValueAllowed,t},genLabel(){if(this.editable&&this.isFocused)return null;const t=O["a"].options.methods.genLabel.call(this);return t?(t.data=t.data||{},t.data.style={},t):t},genSegmentedBtn(t){const e=this.getValue(t),a=this.computedItems.find(t=>this.getValue(t)===e)||t;return a.text&&a.callback?this.$createElement(V["a"],{props:{text:!0},on:{click(t){t.stopPropagation(),a.callback(t)}}},[a.text]):(Object(L["c"])("When using 'segmented' prop without a selection slot, items must contain both a text and callback property",this),null)},updateValue(t){t?this.initialValue=this.lazyValue:this.initialValue!==this.lazyValue&&this.$emit("change",this.lazyValue)}}}),j=a("a797"),F=a("490a"),z=a("0fd9"),P=a("2db4"),A=a("2fa4"),M=a("71d9"),$=Object(m["a"])(g,n,s,!1,null,null,null);e["default"]=$.exports;f()($,{VBadge:b["a"],VBtn:k["a"],VCard:x["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VChip:C["a"],VCol:y["a"],VDialog:_["a"],VDivider:w["a"],VIcon:I["a"],VOverflowBtn:E,VOverlay:j["a"],VProgressCircular:F["a"],VRow:z["a"],VSnackbar:P["a"],VSpacer:A["a"],VToolbar:M["a"]})}},0,["chunk-2d229629"]]);
//# sourceMappingURL=chunk-0f3f8247.a6991738.js.map